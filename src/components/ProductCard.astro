---
import { buttonVariants } from "./ui/button";

const { slug, nombre, precio, imagen, categoria } = Astro.props;

// Obtener el nombre de la categoría para mostrar
import { categorias } from "../lib/categorias";
const categoriaObj = categorias.find((cat) => cat.id === categoria);
const categoriaNombre = categoriaObj ? categoriaObj.nombre : categoria;
---

<article
  class="bg-background border border-brand-100 shadow-sm hover:shadow-lg transition-all duration-300 rounded-2xl overflow-hidden product-card flex flex-col h-full"
  transition:name={`product-${slug}`}
  data-categoria={categoria}
>
  <div class="relative h-60 overflow-hidden bg-brand-50">
    <a href={`/producto/${slug}`} class="block w-full h-full">
      <div class="absolute inset-0 flex items-center justify-center p-4">
        <img
          src={imagen}
          alt={nombre}
          class="w-auto max-w-full h-auto max-h-full object-contain transition-transform duration-500 hover:scale-105"
          transition:name={`product-image-${slug}`}
        />
      </div>
    </a>
    <div class="absolute top-3 right-3">
      <span
        class="inline-block px-2 py-1 bg-brand-100 text-brand-700 text-xs font-medium rounded-full"
      >
        {categoriaNombre}
      </span>
    </div>
  </div>

  <div class="p-5 flex flex-col flex-grow">
    <a
      href={`/producto/${slug}`}
      class="hover:text-brand-600 transition-colors"
    >
      <h3
        class="text-lg font-semibold line-clamp-2 h-14"
        transition:name={`product-title-${slug}`}
      >
        {nombre}
      </h3>
    </a>

    <div class="mt-auto pt-4 flex items-center justify-between">
      <p
        class="text-brand-700 font-bold text-xl"
        transition:name={`product-price-${slug}`}>€{precio}</p
      >

      <a
        href={`/producto/${slug}`}
        class={buttonVariants({
          variant: "brand",
          size: "sm",
          className: "rounded-full",
        })}>Ver detalles</a
      >
    </div>
  </div>
</article>
